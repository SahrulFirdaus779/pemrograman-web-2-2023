<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SIMPEG NURUL FIKRI</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- JQVMap -->
  <link rel="stylesheet" href="plugins/jqvmap/jqvmap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker.css">
  <!-- summernote -->
  <link rel="stylesheet" href="plugins/summernote/summernote-bs4.min.css">
  <!-- fullCalendar -->
  <link rel="stylesheet" href="plugins/fullcalendar/main.css">
</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">

  <!-- Preloader -->
  <div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="dist/img/logo nf.jpg" alt="AdminLTELogo" height="60" width="60">
  </div>

  <!-- Navbar -->
  <nav class="main-header navbar-whit">
    <div class="container-fluid">
        <h3 class="navbar-nav ml-3 mt-2 col-12">Dashboard Pegawai</h3>
        <h5><a class="nav-link" href="timeattendence.html">Home</a></h5>
      </div>
    </div>
</nav>

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a class="brand-link">
      <img src="dist/img/logo nf.jpg" alt="NF logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">SIMPEG NF</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block">Ahmad Admin</a>
        </div>
      </div>
      <!-- SidebarSearch Form -->
      <div class="form-inline">
        <div class="input-group" data-widget="sidebar-search">
          <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
          <div class="input-group-append">
            <button class="btn btn-sidebar">
              <i class="fas fa-search fa-fw"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
              with font-awesome or any other icon font library -->
            <ul class="nav-item list-unstyled">
                <li>
                    <a href="dashboard.html" class="nav-link">
                    <p>
                    Dashboard
                    </p>
                    </a>
                </li>
              <li>
                    <a href="company.html" class="nav-link">
                    <p>Company</p>
                  </a>
                <li>
                    <a href="employe.html" class="nav-link">
                      <p>Employee</p>
                    </a>
                </li>
                <li>
                    <a href="timeattendence.html" class="nav-link active">
                      <p>Time Atandance</p>
                    </a>
                  </li>
                <li>
                    <a href="overtime.html" class="nav-link">
                      <p>Overtime</p>
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link active btn-danger">
                    <p onclick="logout()">Logout</p>
                    </a>
                </li>
                <!-- nav treview -->
            </ul>
        </ul>
      </nav>
    </div>
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row">
        </div>
      </div>
          <div class="col-md-12">
              <div class="card">
                <div class="card-header bg-primary">
                  <h1 class="card-title">Form Overtime</h1>
                </div>
                <div class="card-body">
                          <div class="container mt-5">
                            <div class="card">
                              <div class="card-body">
                                <!-- Form -->
                                <form id="lemburForm" onsubmit="return submitForm()">
                                  <div class="form-group">
                                    <label for="nama">Nama Pegawai:</label>
                                    <input type="text" class="form-control" id="nama" name="nama" required>
                                  </div>
                                  <div class="form-group">
                                    <label for="jabatan">Jabatan:</label>
                                    <input type="text" class="form-control" id="jabatan" name="jabtan" required>
                                  </div>
                                  <div class="form-group">
                                    <label for="tanggal">Tanggal Lembur:</label>
                                    <input type="date" class="form-control" id="tanggal" name="tanggal" required>
                                  </div>
                                  <div class="form-group">
                                    <label for="jams">Jam Mulai:</label>
                                    <input type="time" class="form-control" id="jams" name="jam" required>
                                    <label for="jamen">Jam akhir:</label>
                                    <input type="time" class="form-control" id="jamen" name="jam" required>
                                  </div>
                                  <div class="form-group">
                                    <label for="deskripsi">Deskripsi Pekerjaan</label>
                                    <textarea class="form-control" id="deskripsi" rows="3" placeholder="Masukkan alamat lengkap"></textarea>
                                  </div>
                                  <button id="button-submit" type="submit" class="btn btn-primary"onclick="return back()">Submit</button>
                                  <button id="button-back" type="reset" class="btn btn-danger" >reset</button>
                                </form>
                              </div>
                            </div>
                          </div>
                    </div>
                    
                      <!-- /.content-wrapper -->
                </div>
                <!-- /.card-body -->
              </div>
        </div>
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
          
            <!-- Footer -->
            <footer class="main-footer text-center">
              <strong>Copyright &copy; 2023 <a href="https://nurulfikri.ac.id/">SIMPEG NF</a>.</strong>
              All rights reserved.
            </footer>
          
            <!-- Control Sidebar -->
            <aside class="control-sidebar control-sidebar-dark">
              <!-- Control sidebar content goes here -->
            </aside>
            <!-- /.control-sidebar -->
          </div>
          <!-- ./wrapper -->
          
          <!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button);
</script>

<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="plugins/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="plugins/moment/moment.min.js"></script>
<script src="plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- fullCalendar 2.2.5 -->
<script src="plugins/moment/moment.min.js"></script>
<script src="plugins/fullcalendar/main.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="dist/js/pages/dashboard.js"></script>

<!-- Page specific script -->
<script>
  // Function to edit the array based on the id

  function back() {
    const resultURL = "overtime.html";
    window.location.href = resultURL;
    return false;
  }
  function editItemById(
    id,
    nama,
    jabatan,
    tanggal,
    jams,
    jamen,
    deskripsi
  ) {
    const storedData = localStorage.getItem("datas");
    const parsedData = JSON.parse(storedData);
    const newDatas = parsedData.map((item) => {
      if (item.id === id) {
        // Modify the name property for the item with the specified id
        return { ...item, nama, jabatan, tanggal, jams, jamen, deskripsi };
      }
      return item;
    });
    localStorage.setItem("datas", JSON.stringify(newDatas));
    return true;
  }
  function submitForm() {
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const action = urlParams.get("action");
    const id = urlParams.get("id");
    if (action == "view") {
      return false;
    }
    var nama = document.getElementById("nama").value;
    var jabatan = document.getElementById("jabatan").value;
    var tanggal = document.getElementById("tanggal").value;
    var jams = document.getElementById("jams").value;
    var jamen = document.getElementById("jamen").value;
    var deskripsi = document.getElementById("deskripsi").value;

    // Validasi form
    if (
      nama === "" ||
      jabatan === "" ||
      tanggal === "" ||
      jams === "" ||
      jamen === "" ||
      deskripsi === ""
    ) {
      alert("Semua field harus diisi!");
      return false;
    }
    if (action == "edit") {
      editItemById(id, nama, jabatan, tanggal, jams, jamen, deskripsi);
      const resultURL = "overtime.html";
      window.location.href = resultURL;
      return false;
    } else {
      const data = {
        id: Math.random().toString(16).substr(2, 8),
        nama,
        jabatan,
        tanggal,
        jams,
        jamen,
        deskripsi,
      };
      const storedData = localStorage.getItem("datas");
      if (storedData) {
        const parsedData = JSON.parse(storedData);
        parsedData.push(data);
        localStorage.setItem("datas", JSON.stringify(parsedData));
      } else {
        localStorage.setItem("datas", JSON.stringify([data]));
      }

      const resultURL = "overtime.html";
      window.location.href = resultURL;
      return false;
    }
  }

  // DOM
  const nama = document.getElementById("nama");
  const jabatan = document.getElementById("jabatan");
  const tanggal = document.getElementById("tanggal");
  const jams = document.getElementById("jams");
  const jamen = document.getElementById("jamen");
  const deskripsi = document.getElementById("deskripsi");

  // GET PARAMETER ON URL
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);
  const action = urlParams.get("action");
  const id = urlParams.get("id");

  // IF ACTION VIEW
  if (action == "view" && id) {
    var submitButton = document.getElementById("button-submit");
    var submitBack = document.getElementById("button-back");

    // Set the display property to none
    submitButton.style.display = "none";
    submitBack.style.display = "block";
    const datas = localStorage.getItem("datas");
    if (datas) {
      // GET DATA BY ID
      const parse = JSON.parse(datas);
      const findById = parse.find((data) => data.id == id);

      // SET DATA INPUT VALUE
      nama.value = findById?.nama;
      nama.readOnly = true;

      jabatan.value = findById?.jabatan;
      jabatan.readOnly = true;

      tanggal.value = findById?.tanggal;
      tanggal.readOnly = true;

      jams.value = findById?.jams;
      jams.readOnly = true;

      jamen.value = findById?.jamen;
      jamen.readOnly = true;

      deskripsi.value = findById?.deskripsi;
      deskripsi.readOnly = true;
    }
  }
  if (action == "edit" && id) {
    const datas = localStorage.getItem("datas");
    if (datas) {
      // GET DATA BY ID
      const parse = JSON.parse(datas);
      const findById = parse.find((data) => data.id == id);

      // SET DATA INPUT VALUE
      nama.value = findById?.nama;
      jabatan.value = findById?.jabatan;
      tanggal.value = findById?.tanggal;
      jams.value = findById?.jams;
      jamen.value = findById?.jamen;
      deskripsi.value = findById?.deskripsi;
    }
  }
  function logout () {
        alert('Apakah Anda yakin Akan keluar?');
        window.location.href = "index.html"
    }
</script>
</body>
</html>
  

